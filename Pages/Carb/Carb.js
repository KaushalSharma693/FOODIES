const product = [
  {
    id: 0,
    image: '/images/C1.webp',
    title: 'GREEN & YELLOW SQUASH LINGUINI SHRIMP SCAMPI',
    price: 21.00,
    prepTime: '15 mins',
    cookTime: '15 mins',
    servings: 4,
    carbs: '8g',
    ingredients: [
      '1 lb large shrimp, peeled and deveined',
      '2 medium zucchini, spiralized',
      '2 medium yellow squash, spiralized',
      '4 cloves garlic, minced',
      '1/4 cup butter',
      '2 tbsp olive oil',
      '1/4 cup dry white wine',
      '1/4 cup fresh lemon juice',
      '1/4 cup fresh parsley, chopped',
      'Red pepper flakes to taste',
      'Salt and pepper to taste',
      '1/4 cup grated Parmesan cheese'
    ],
    instructions: [
      'Spiralize the zucchini and yellow squash into noodles. Pat dry with paper towels to remove excess moisture.',
      'Heat olive oil in a large skillet over medium-high heat. Add spiralized vegetables and sauté for 2-3 minutes until just tender. Remove and set aside.',
      'In the same skillet, melt butter over medium heat. Add minced garlic and red pepper flakes, cooking for 1 minute until fragrant.',
      'Add shrimp to the skillet and cook for 2-3 minutes per side until pink and opaque.',
      'Pour in white wine and lemon juice, scraping up any browned bits from the bottom of the pan. Let simmer for 2 minutes.',
      'Return the vegetable noodles to the skillet and toss everything together. Cook for 1-2 minutes to heat through.',
      'Remove from heat and stir in fresh parsley. Season with salt and pepper to taste.',
      'Serve immediately, topped with grated Parmesan cheese.'
    ],
    nutrition: {
      calories: 285,
      protein: '28g',
      carbs: '8g',
      fat: '16g',
      fiber: '2g'
    }
  },
  {
    id: 1,
    image: '/images/c2.png',
    title: 'ZUCCHINI LASAGNA (LASAGNE) - LOW CARB',
    price: 14.00,
    prepTime: '25 mins',
    cookTime: '45 mins',
    servings: 8,
    carbs: '9g',
    ingredients: [
      '4 large zucchini, sliced lengthwise 1/4 inch thick',
      '1 lb ground beef',
      '1 lb Italian sausage',
      '1 jar (24 oz) marinara sauce (sugar-free)',
      '15 oz ricotta cheese',
      '2 cups shredded mozzarella cheese',
      '1/2 cup grated Parmesan cheese',
      '1 egg',
      '2 cloves garlic, minced',
      '2 tbsp Italian seasoning',
      'Salt and pepper to taste',
      'Fresh basil for garnish'
    ],
    instructions: [
      'Preheat oven to 375°F (190°C). Slice zucchini lengthwise and lay on paper towels. Sprinkle with salt and let sit for 10 minutes to release moisture.',
      'Meanwhile, brown ground beef and Italian sausage in a large skillet over medium-high heat. Drain excess fat.',
      'Add marinara sauce and Italian seasoning to the meat. Simmer for 10 minutes.',
      'In a bowl, combine ricotta cheese, egg, half the Parmesan, and garlic. Mix well and season with salt and pepper.',
      'Pat zucchini slices dry with paper towels to remove released moisture.',
      'In a 9x13 inch baking dish, spread a thin layer of meat sauce. Layer zucchini slices, ricotta mixture, mozzarella, and meat sauce. Repeat layers twice.',
      'Top with remaining mozzarella and Parmesan cheese.',
      'Cover with foil and bake for 30 minutes. Remove foil and bake an additional 15 minutes until cheese is golden and bubbly.',
      'Let rest for 10-15 minutes before slicing. Garnish with fresh basil and serve.'
    ],
    nutrition: {
      calories: 385,
      protein: '32g',
      carbs: '9g',
      fat: '25g',
      fiber: '3g'
    }
  },
  {
    id: 2,
    image: '/images/c3.webp',
    title: 'NOT YOUR MAMAS MEATLOAF - LOW CARB & BEEFED UP',
    price: 15.49,
    prepTime: '15 mins',
    cookTime: '60 mins',
    servings: 6,
    carbs: '6g',
    ingredients: [
      '2 lbs ground beef (80/20)',
      '1/2 lb ground pork',
      '1 cup almond flour',
      '2 eggs, beaten',
      '1/2 cup sugar-free ketchup, divided',
      '1/4 cup heavy cream',
      '1 small onion, finely diced',
      '3 cloves garlic, minced',
      '2 tbsp Worcestershire sauce',
      '1 tbsp Dijon mustard',
      '2 tsp Italian seasoning',
      '1 tsp smoked paprika',
      'Salt and pepper to taste',
      '6 slices bacon'
    ],
    instructions: [
      'Preheat oven to 350°F (175°C). Line a baking sheet with parchment paper.',
      'In a large bowl, combine ground beef, ground pork, almond flour, eggs, 1/4 cup ketchup, heavy cream, onion, garlic, Worcestershire sauce, and seasonings.',
      'Mix gently with your hands until just combined. Don\'t overmix or the meatloaf will be tough.',
      'Shape the mixture into a loaf on the prepared baking sheet.',
      'Lay bacon strips across the top of the meatloaf, tucking the ends underneath.',
      'In a small bowl, mix remaining 1/4 cup ketchup with Dijon mustard. Brush half of this glaze over the bacon.',
      'Bake for 45 minutes, then brush with remaining glaze.',
      'Continue baking for 15 more minutes until internal temperature reaches 160°F.',
      'Let rest for 10 minutes before slicing. The bacon should be crispy and the meatloaf should be juicy.'
    ],
    nutrition: {
      calories: 475,
      protein: '38g',
      carbs: '6g',
      fat: '33g',
      fiber: '2g'
    }
  },
  {
    id: 3,
    image: '/images/c4.webp',
    title: 'BALSAMIC CHICKEN AND MUSHROOMS',
    price: 15.75,
    prepTime: '10 mins',
    cookTime: '25 mins',
    servings: 4,
    carbs: '7g',
    ingredients: [
      '4 boneless skinless chicken breasts',
      '8 oz mushrooms, sliced',
      '1/3 cup balsamic vinegar',
      '1/2 cup chicken broth',
      '3 cloves garlic, minced',
      '2 tbsp butter',
      '2 tbsp olive oil',
      '1 tsp Italian seasoning',
      '1/2 tsp dried thyme',
      'Salt and pepper to taste',
      'Fresh parsley for garnish',
      'Grated Parmesan (optional)'
    ],
    instructions: [
      'Season chicken breasts with salt, pepper, and Italian seasoning on both sides.',
      'Heat olive oil in a large skillet over medium-high heat. Add chicken and cook for 6-7 minutes per side until golden brown and cooked through. Remove and set aside.',
      'In the same skillet, melt butter over medium heat. Add mushrooms and cook for 5-6 minutes until they release their moisture and turn golden.',
      'Add minced garlic and thyme, cooking for 1 minute until fragrant.',
      'Pour in balsamic vinegar and chicken broth, scraping up any browned bits from the bottom of the pan.',
      'Bring to a simmer and cook for 5-7 minutes until the sauce reduces and thickens slightly.',
      'Return chicken to the skillet, spooning sauce over the top. Cook for 2-3 minutes to reheat.',
      'Garnish with fresh parsley and Parmesan cheese if desired. Serve hot.'
    ],
    nutrition: {
      calories: 295,
      protein: '35g',
      carbs: '7g',
      fat: '13g',
      fiber: '1g'
    }
  },
  {
    id: 5,
    image: '/images/c5.webp',
    title: 'ONE MINUTE FLAX MUFFIN - LOW CARB',
    price: 13.39,
    prepTime: '2 mins',
    cookTime: '1 min',
    servings: 1,
    carbs: '3g',
    ingredients: [
      '1/4 cup ground flaxseed meal',
      '1/2 tsp baking powder',
      '1 tbsp butter, melted',
      '1 large egg',
      '1/2 tsp cinnamon (optional)',
      'Pinch of salt',
      '1 tsp vanilla extract (optional)',
      'Sweetener to taste (stevia or monk fruit)'
    ],
    instructions: [
      'In a microwave-safe mug or ramekin, combine ground flaxseed meal, baking powder, cinnamon, salt, and sweetener.',
      'Add the egg, melted butter, and vanilla extract. Mix well with a fork until fully combined and smooth.',
      'Microwave on high for 60-90 seconds. The muffin will rise and set.',
      'Let cool for 1-2 minutes, then run a knife around the edges and turn out onto a plate.',
      'Slice in half horizontally and top with butter, cream cheese, sugar-free jam, or use as a sandwich bread.',
      'Enjoy immediately while warm!'
    ],
    nutrition: {
      calories: 245,
      protein: '11g',
      carbs: '3g',
      fat: '21g',
      fiber: '8g'
    }
  },
  {
    id: 5,
    image: '/images/c6.webp',
    title: 'TARRAGON CHICKEN CASSEROLE',
    price: 33.50,
    prepTime: '20 mins',
    cookTime: '40 mins',
    servings: 6,
    carbs: '8g',
    ingredients: [
      '2 lbs chicken thighs, boneless and skinless, cut into chunks',
      '8 oz mushrooms, sliced',
      '1 cup heavy cream',
      '1/2 cup chicken broth',
      '1/2 cup sour cream',
      '3 tbsp fresh tarragon, chopped (or 1 tbsp dried)',
      '1 small onion, diced',
      '3 cloves garlic, minced',
      '2 cups cauliflower florets',
      '1 cup shredded Gruyere cheese',
      '3 tbsp butter',
      'Salt and pepper to taste',
      '1/4 cup pork rinds, crushed (for topping)'
    ],
    instructions: [
      'Preheat oven to 375°F (190°C). Grease a 9x13 inch baking dish.',
      'Season chicken chunks with salt and pepper. In a large skillet, melt 2 tbsp butter over medium-high heat and brown chicken on all sides. Transfer to the baking dish.',
      'In the same skillet, add remaining butter and sauté onions until translucent, about 4 minutes.',
      'Add mushrooms and cook until golden, about 5 minutes. Add garlic and cook for 1 minute.',
      'Stir in heavy cream, chicken broth, and tarragon. Bring to a simmer and cook for 3-4 minutes.',
      'Remove from heat and stir in sour cream. Season with salt and pepper.',
      'Add cauliflower florets to the baking dish with the chicken. Pour the cream sauce over everything.',
      'Top with shredded Gruyere cheese and crushed pork rinds.',
      'Bake uncovered for 35-40 minutes until chicken is cooked through, cauliflower is tender, and the top is golden brown.',
      'Let rest for 5 minutes before serving. Garnish with additional fresh tarragon.'
    ],
    nutrition: {
      calories: 485,
      protein: '36g',
      carbs: '8g',
      fat: '35g',
      fiber: '2g'
    }
  },
  {
    id: 6,
    image: '/images/c7.webp',
    title: 'LOW CARB PIZZA',
    price: 22.34,
    prepTime: '15 mins',
    cookTime: '20 mins',
    servings: 4,
    carbs: '6g',
    ingredients: [
      '2 cups shredded mozzarella cheese',
      '3/4 cup almond flour',
      '2 tbsp cream cheese',
      '1 large egg',
      '1 tsp Italian seasoning',
      '1/2 tsp garlic powder',
      '1/2 cup sugar-free pizza sauce',
      '1 1/2 cups shredded mozzarella (for topping)',
      'Pizza toppings of choice (pepperoni, mushrooms, bell peppers, olives, etc.)',
      'Fresh basil for garnish'
    ],
    instructions: [
      'Preheat oven to 425°F (220°C). Line a baking sheet with parchment paper.',
      'In a microwave-safe bowl, combine 2 cups mozzarella and cream cheese. Microwave for 1 minute, stir, then microwave for another 30 seconds until fully melted.',
      'Quickly stir in almond flour, egg, Italian seasoning, and garlic powder. Mix until a dough forms. If too sticky, wet your hands slightly.',
      'Place dough on the parchment paper and cover with another piece of parchment. Roll out into a circle about 1/4 inch thick.',
      'Remove top parchment and bake the crust for 8-10 minutes until it starts to turn golden.',
      'Remove from oven and spread pizza sauce evenly over the crust, leaving a small border.',
      'Top with shredded mozzarella and your favorite toppings.',
      'Return to oven and bake for 8-10 minutes until cheese is melted and bubbly.',
      'Let cool for 2-3 minutes, garnish with fresh basil, slice, and serve.'
    ],
    nutrition: {
      calories: 385,
      protein: '25g',
      carbs: '6g',
      fat: '29g',
      fiber: '3g'
    }
  },
  {
    id: 7,
    image: '/images/c8.webp',
    title: 'LOW CARB CHILI',
    price: 14.49,
    prepTime: '15 mins',
    cookTime: '45 mins',
    servings: 8,
    carbs: '9g',
    ingredients: [
      '2 lbs ground beef',
      '1 lb Italian sausage, casings removed',
      '1 large onion, diced',
      '1 green bell pepper, diced',
      '4 cloves garlic, minced',
      '1 can (28 oz) crushed tomatoes',
      '1 can (6 oz) tomato paste',
      '2 cups beef broth',
      '3 tbsp chili powder',
      '1 tbsp cumin',
      '1 tbsp smoked paprika',
      '1 tsp oregano',
      '1/2 tsp cayenne pepper (adjust to taste)',
      'Salt and pepper to taste',
      'Optional toppings: sour cream, shredded cheddar, diced avocado, cilantro'
    ],
    instructions: [
      'In a large pot or Dutch oven, brown ground beef and Italian sausage over medium-high heat, breaking it up as it cooks. Drain excess fat.',
      'Add diced onion and bell pepper to the pot. Cook for 5-6 minutes until vegetables soften.',
      'Stir in minced garlic and cook for 1 minute until fragrant.',
      'Add all spices (chili powder, cumin, paprika, oregano, cayenne) and stir to coat the meat and vegetables. Cook for 1-2 minutes to toast the spices.',
      'Pour in crushed tomatoes, tomato paste, and beef broth. Stir well to combine.',
      'Bring to a boil, then reduce heat to low. Cover and simmer for 30-40 minutes, stirring occasionally.',
      'Taste and adjust seasonings with salt, pepper, and additional chili powder if desired.',
      'Serve hot with your favorite low-carb toppings like sour cream, shredded cheddar cheese, diced avocado, and fresh cilantro.'
    ],
    nutrition: {
      calories: 425,
      protein: '35g',
      carbs: '9g',
      fat: '28g',
      fiber: '3g'
    }
  }
];

// Render products
document.querySelector("#root").innerHTML = product.map((item, i) => {
  const { image, title, price, carbs } = item;
  return `
    <div class='box'>
      <div class='img-box'>
        <img class='images' src='${image}' alt='${title}'></img>
      </div>
      <div class='bottom'>
        <p>${title}</p>
        <div class='price-badge'>
          <h2>$ ${price.toFixed(2)}</h2>
          <span class='carb-badge'>ONLY ${carbs} CARBS</span>
        </div>
        <div class='button-group'>
          <button class='add-to-cart-btn' onClick='addtocart(${i})'>
            <i class="fa-solid fa-cart-plus"></i> Add to Cart
          </button>
          <button class='view-recipe-btn' onClick='viewRecipe(${i})'>
            <i class="fa-solid fa-book"></i> Recipe
          </button>
        </div>
      </div>
    </div>`;
}).join('');

// Add to cart function
function addtocart(i) {
  const p = product[i];
  addToCart({
    id: "carb-" + p.id,
    title: p.title,
    price: p.price,
    image: p.image
  });
}

// View recipe function
function viewRecipe(i) {
  const recipe = product[i];
  const modal = document.getElementById('recipeModal');
  const recipeDetails = document.getElementById('recipeDetails');
  
  recipeDetails.innerHTML = `
    <div class='recipe-header'>
      <h2>${recipe.title}</h2>
      <div class='recipe-meta'>
        <div class='meta-item'>
          <i class="fa-solid fa-clock"></i>
          <span><strong>Prep:</strong> ${recipe.prepTime}</span>
        </div>
        <div class='meta-item'>
          <i class="fa-solid fa-fire"></i>
          <span><strong>Cook:</strong> ${recipe.cookTime}</span>
        </div>
        <div class='meta-item'>
          <i class="fa-solid fa-utensils"></i>
          <span><strong>Servings:</strong> ${recipe.servings}</span>
        </div>
        <div class='meta-item'>
          <i class="fa-solid fa-leaf"></i>
          <span><strong>Net Carbs:</strong> ${recipe.carbs}</span>
        </div>
      </div>
    </div>
    
    <div class='recipe-section'>
      <h3><i class="fa-solid fa-list"></i> Ingredients</h3>
      <ul class='ingredients-list'>
        ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
      </ul>
    </div>
    
    <div class='recipe-section'>
      <h3><i class="fa-solid fa-clipboard-list"></i> Instructions</h3>
      <ol class='instructions-list'>
        ${recipe.instructions.map(step => `<li>${step}</li>`).join('')}
      </ol>
    </div>
    
    <div class='recipe-section'>
      <h3><i class="fa-solid fa-chart-pie"></i> Nutrition Information (per serving)</h3>
      <div class='nutrition-info'>
        <div class='nutrition-item'>
          <strong>${recipe.nutrition.calories}</strong>
          <span>Calories</span>
        </div>
        <div class='nutrition-item'>
          <strong>${recipe.nutrition.protein}</strong>
          <span>Protein</span>
        </div>
        <div class='nutrition-item'>
          <strong>${recipe.nutrition.carbs}</strong>
          <span>Carbs</span>
        </div>
        <div class='nutrition-item'>
          <strong>${recipe.nutrition.fat}</strong>
          <span>Fat</span>
        </div>
        <div class='nutrition-item'>
          <strong>${recipe.nutrition.fiber}</strong>
          <span>Fiber</span>
        </div>
      </div>
    </div>
  `;
  
  modal.style.display = 'block';
}

// Modal close functionality
const modal = document.getElementById('recipeModal');
const closeBtn = document.querySelector('.close');

closeBtn.onclick = function() {
  modal.style.display = 'none';
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = 'none';
  }
}

// Close modal with Escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    modal.style.display = 'none';
  }
});